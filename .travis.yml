language: cpp
compiler: gcc

branches:
  except:
    - /^dale\/.*/

matrix:
  include:
    - os: linux
      dist: xenial
      script:
        - mkdir cmake-build && cd cmake-build
        - cmake -DCMAKE_VERBOSE_MAKEFILE:BOOL=ON ../
        - cmake --build .
        - ctest
    - os: windows
      env:
        - PATH="/c/Program Files/CMake/bin:$PATH"
      script:
        - mkdir cmake-build && cd cmake-build
        - cmake -G "MSYS Makefiles" -DCMAKE_VERBOSE_MAKEFILE:BOOL=ON ../
        - cmake --build .
        - ctest

before_install:
  - if [ "$TRAVIS_OS_NAME" = "linux" ]; then sudo apt-get install -y libglu1-mesa-dev; fi
  - if [ "$TRAVIS_OS_NAME" = "windows" ]; then choco install make zip ; fi
